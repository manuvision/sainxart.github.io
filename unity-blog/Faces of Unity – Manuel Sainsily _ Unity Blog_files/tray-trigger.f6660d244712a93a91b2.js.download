(window._vfP=window._vfP||[]).push([[183],{594:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));const i=50,s=()=>{},a=t=>`$${t}_inListener`,r=t=>`$${t}_outListener`,o=t=>`$${t}_tid`,u=t=>{const{inEvent:e,outEvent:n,activeClass:u,defaultCallback:l=s,outTimeout:c=i}=t;return{inserted(t,{name:i,value:s=l,arg:d=u}){t[a(i)]=()=>{clearTimeout(t[o(i)]),t.classList.add(d),s(!0)},t.addEventListener(e,t[a(i)],{passive:!0}),t[r(i)]=()=>{clearTimeout(t[o(i)]),t[o(i)]=setTimeout(()=>{t.classList.remove(d),s(!1)},c)},t.addEventListener(n,t[r(i)],{passive:!0})},unbind(t,{name:i}){clearTimeout(t[o(i)]),delete t[o(i)],t.removeEventListener(e,t[a(i)]),delete t[a(i)],t.removeEventListener(n,t[r(i)]),delete t[r(i)]}}}},639:function(t,e){t.exports='<path fill="currentColor" fill-rule="evenodd" d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"></path>\n'},743:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n(2),a=n(267),r=n(1),o=n(94),u=n(544),l=n(545),c=n(745),d=n(639),h=n.n(d),E=n(533);const v=Object(E.c)("bell_icon",h.a);var f=n(532),g=n(4),N=n(102);const{LIVEBLOG:L,TRAY_TRIGGER:p,COMMENTS:C}=g.d;var T={components:{roundCountBadge:c.a,vfBellIcon:v,vfButton:f.a},directives:{hovered:l.a,innerFocus:u.a},props:{floating:{type:String,default:"false"},parentComponent:{type:String,default:"",validator:t=>-1!==[L,p,C].indexOf(t)}},data:()=>({locatorsTrayTrigger:N.f,dataVfId:-1,hidden:!1}),computed:{countBadgeSize(){return this.isFloating?a.a.SMALL:a.a.TINY},isFloating(){return"true"===this.floating},isLoggedIn(){return this.$store.getters[i.Tb]},currentUserUuid(){return this.$store.getters[i.kb]},count(){const t=this.$store.state.notifications.broadcasts.guest_user;return this.isLoggedIn||""===t?this.$store.getters[i.qc]:0},ariaCount(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel(){return this.$i18n("aria.open_tray")},classes(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},created(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted(){window.vf.context.init(o.a.NOTIFICATIONS),this.$publish(r.b.CHANNEL,r.b.EVENTS.BELL_LOAD,{widget_type:this.parentComponent}),this.$publish(r.K.CHANNEL,r.K.EVENTS.LOADED,this),this.$subscribe(r.K.CHANNEL,r.K.EVENTS.HIDE,()=>{this.hidden=this.isFloating}),this.$subscribe(r.K.CHANNEL,r.K.EVENTS.UNHIDE,()=>{setTimeout(()=>{this.hidden=!1},250)});const t=window.localStorage.getItem("_vf_notification_queue_last_seen_"+this.currentUserUuid);this.isLoggedIn||null===t||this.$store.commit(s.ic,t)},methods:{toggle(){this.$publish(r.E.CHANNEL,r.E.EVENTS.TOGGLE,this.$el),this.$publish(r.K.CHANNEL,r.K.EVENTS.CLICKED),this.parentComponent===p?this.$publish(r.b.CHANNEL,r.b.EVENTS.TRAY_TRIGGER_CLICK,{floating:this.isFloating}):this.parentComponent===C?this.$publish(r.b.CHANNEL,r.b.EVENTS.CONVERSATION_BELL_CLICK):this.parentComponent===L&&this.$publish(r.b.CHANNEL,r.b.EVENTS.LIVEBLOG_BELL_CLICK)},trayIntent(){this.$publish(r.E.CHANNEL,r.E.EVENTS.OPEN_INTENT)}}},b=n(25),m=Object(b.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId,"data-test":t.locatorsTrayTrigger.bell()},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[n("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),n("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"76f9528e",null);e.default=m.exports}}]);
//# sourceMappingURL=tray-trigger.f6660d244712a93a91b2.js.map