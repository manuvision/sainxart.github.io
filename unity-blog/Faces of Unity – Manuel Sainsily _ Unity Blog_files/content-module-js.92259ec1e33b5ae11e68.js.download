(window._vfP=window._vfP||[]).push([[190,191,192],{387:function(t,e,n){"use strict";n.r(e),n.d(e,"REPLY_THREAD_MODES",(function(){return _})),n.d(e,"replyThreads",(function(){return b}));var i=n(2),s=n(18),c=n(61),o=n(24);const a={[i.xb](t,e){(t[e]||[]).pop()},[i.a]:Object(c.a)(s.default,(t,e)=>!e.some(({thread_uuid:e})=>e===t.thread_uuid)),[i.C]:Object(o.e)(s.default),[i.md](t,{uuid:e,mode:n}){const i=t[e];i[i.length-1].mode=n}};var r=n(0);const u={[r.a]:t=>e=>{const n=t[e]||[];return n[n.length-1]||{}},[r.Nb]:t=>e=>Boolean(t[e])};const d={[n(3).a](t,{thread_uuid:e,offset_top:n,mode:s}){const c=t.getters[r.T](e),o=t.getters[r.X](e);n=t.getters[r.a](o).offset_top||n;const a={key:o,items:[{parent_thread_uuid:c.thread_uuid,content_container_uuid:o,thread_uuid:e,offset_top:n,mode:s}]};t.commit(i.a,a)}},_={MENTION:"mention",REPLY_PARENT:"reply",REPLIES:"replies"},l=()=>({}),b=()=>({state:l,mutations:a,getters:u,actions:d})},390:function(t,e,n){"use strict";n.r(e),n.d(e,"reportComment",(function(){return u}));var i=n(2),s=n(18),c=n(24);const o={[i.Nc](t,{content_container_uuid:e,content_uuid:n,offset_top:i}){s.default.set(t,e,{content_uuid:n,offset_top:i})},[i.M]:Object(c.e)(s.default)};const a={[n(0).b]:t=>e=>{var n;return null!==(n=t[e])&&void 0!==n&&n.content_uuid?t[e]:null}},r=()=>({}),u=()=>({state:r,mutations:o,getters:a})},523:function(t,e,n){"use strict";n.r(e),n.d(e,"storeModule",(function(){return I}));n(42);var i=n(2),s=n(51),c=n(24),o=n(763),a=n(270),r=n(18);const u={[i.oc]:Object(c.h)(r.default,a.c),[i.Lc](t,e){delete e.item.actions,Object(c.h)(r.default,a.c)(t,e)},[i.Gb]:Object(c.e)(r.default),[i.fb](t,e){t[e].isNew=!1},[i.eb](t,e){t[e].isNew=!0},[i.hb](t,e){t[e].read=!1},[i.gb](t,e){t[e].read=!0},[i.tc](t,{content_uuid:e,place:n}){t[e].place=n},[i.pc](t,{content_uuid:e,animation:n}){t[e].animation=Object.values(a.a).includes(n)?n:a.a.NONE},[i.bb](t,e){t[e].is_picked=!0},[i.cb](t,e){t[e].is_picked=!1},[i.gd](t,e){t[e].state_reasons.push(s.d.CONTENT_MARKED_AS_SPAM)},[i.db](t,e){t[e].state=s.c.VISIBLE,t[e].simplified_state=s.c.VISIBLE,t[e].state_reasons=t[e].state_reasons.filter(t=>t!==s.d.CONTENT_DISABLED&&t!==s.d.CONTENT_MARKED_AS_SPAM&&t!==s.d.CONTENT_AWAITING_MODERATION)},[i.ab](t,e){t[e].simplified_state=s.c.DISABLED,t[e].state_reasons.push(s.d.CONTENT_DISABLED)},[i.wb](t,e){t[e].is_pinned=!0,t[e].date_pinned=Date.now()},[i.ld](t,e){t[e].is_pinned=!1,t[e].date_pinned=void 0},[i.sc](t,{content_uuid:e,simplified_state:n}){t[e].simplified_state=n,t[e].state_reasons.push(s.d.CONTENT_DELETED)},[i.ec](t){Object.values(t).forEach(t=>{t.actions=[]})},[i.lb]:Object(o.b)("total_likes"),[i.Z]:Object(o.a)("total_likes"),[i.jb]:Object(o.b)("total_dislikes"),[i.Y]:Object(o.a)("total_dislikes"),[i.j](t,e){t[e].actions=t[e].actions.concat("flag")},[i.I](t,e){t[e].total_flags=0,t[e].actions=t[e].actions.filter(t=>"flag"!==t)},[i.m](t,e){t[e].actions=t[e].actions.concat("like")},[i.k](t,e){t[e].actions=t[e].actions.concat("flag"),t[e].total_flags+=1},[i.kb]:Object(o.b)("total_flags"),[i.f](t,e){t[e].actions=t[e].actions.concat("dislike")},[i.Ub](t,e){t[e].actions=t[e].actions.filter(t=>"like"!==t)},[i.Hb](t,e){t[e].actions=t[e].actions.filter(t=>"dislike"!==t)},[i.o](t,{parent_uuid:e,child_uuid:n}){t[e].reply_uuids.push(n),t[n].parent_uuid=e},[i.ac](t,{parent_uuid:e,child_uuid:n}){t[e].reply_uuids=t[e].reply_uuids.filter(t=>t!==n),t[n].parent_uuid=""},[i.mb](t,e){t[e]&&(t[e].total_replies+=1,t[e].total_direct_replies+=1)},[i.V](t,e){t[e]&&(t[e].total_replies-=1,t[e].total_direct_replies-=1)}};var d=n(0),_=n(9),l=n(50),b=n(543);const f=(t,e)=>Boolean(t)&&Object(_.I)(e),p={[d.T]:t=>e=>t[e],[d.S]:(t,e)=>n=>Object.values(t).filter(({thread_uuid:t})=>t===n).filter(({content_uuid:t})=>e[d.Rb](t)),[d.R]:(t,e)=>n=>Object.values(t).filter(({parent_uuid:t})=>t===n).filter(({content_uuid:t})=>e[d.Rb](t)),[d.Q]:t=>({thread_uuid:e,user_uuid:n})=>Object.values(t).filter(t=>t.thread_uuid===e&&t.actor_uuid===n),[d.gb]:(t,e)=>n=>t[n].reply_uuids.filter(e[d.Rb]).map(e[d.T]).filter(t=>!t.state_reasons.includes(s.d.ACTOR_GHOST_BANNED)).sort((t,e)=>t.time-e.time),[d.w]:(t,e)=>n=>{const i=t[n],s=e[d.md](i),c=e[d.kb];return Boolean(i)&&(t=>!t.social_id&&Boolean(t.content))(i)&&s&&s.uuid===c},[d.v]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&i.simplified_state!==s.c.VISIBLE},[d.s]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&!i.state_reasons.includes(s.d.CONTENT_DISABLED)},[d.x]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&!i.is_pinned&&i.parent_uuid===i.content_container_uuid},[d.A]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&i.is_pinned&&i.parent_uuid===i.content_container_uuid},[d.r]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&i.total_flags>0},[d.t]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&!i.is_picked},[d.u]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&i.is_picked},[d.z]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&!i.state_reasons.includes(s.d.CONTENT_MARKED_AS_SPAM)},[d.B]:(t,e)=>n=>{const i=t[n];return f(i,e[d.ib])&&i.state_reasons.includes(s.d.CONTENT_MARKED_AS_SPAM)},[d.y]:(t,e)=>n=>{const i=t[n];return e[d.w](n)&&!i.state_reasons.includes(s.d.CONTENT_DELETED)},[d.db]:t=>e=>t[e].actions.some(t=>"like"===t),[d.bb]:t=>e=>t[e].actions.some(t=>"dislike"===t),[d.cb]:(t,e)=>n=>t[n].actions.some(t=>"flag"===t)||Object(b.f)(n,e[d.kb]),[d.ab]:t=>(e,n)=>t[e].actor_uuid===n,[d.Z]:(t,e)=>t=>e[d.ab](t,e[d.kb]),[d.eb]:t=>e=>t[e].is_pinned,[d.fb]:t=>e=>!t[e].is_pinned,[d.Rb]:(t,e)=>n=>{const i=t[n];if(!i)return!1;if(Object(_.I)(e[d.ib]))return!0;const c=e[d.Qb];if(Object(l.c)(c)&&c(i.content_container_uuid))return e[d.Vb](i);if(!i.state_reasons.includes(s.d.CONTENT_DELETED)&&e[d.Z](i.content_uuid))return!0;const o=e[d.pd](i.actor_uuid),a=i.simplified_state===s.c.DISABLED,r=0===i.total_replies||0===e[d.R](i.content_uuid).length;return!(o&&r||a)&&!i.state_reasons.includes(s.d.CONTENT_AWAITING_MODERATION)},[d.Pb]:t=>e=>t[e].isNew,[d.Y]:t=>(e,n)=>t[e].reply_uuids.includes(n),[d.X]:t=>e=>t[e].content_container_uuid,[d.ed]:t=>e=>Object.values(t).filter(({content_container_uuid:t,content_uuid:n})=>t===e&&p[d.Rb](n)).length};var E=n(3),m=n(8),N=n(103),O={...{[m.i]:({state:t,getters:e,dispatch:n},i)=>t[i.content_uuid]?e[d.Sb](i.actor_uuid)?n(E.pc,i):n(E.sc,i):Promise.resolve(),[E.pc]({commit:t},{action:e,content_uuid:n,payload:s}){switch(e){case N.a.FLAGGED:case N.a.FLAGS_CLEARED:case N.a.PICKED:case N.a.UNPICKED:case N.a.PINNED:case N.a.UNPINNED:case N.a.SPAM:case N.a.DISABLED:case N.a.VISIBLE:t(i.Lc,{key:n,item:s})}},[E.sc]({commit:t},{action:e,content_uuid:n,payload:s}){switch(e){case N.a.LIKED:t(i.lb,n);break;case N.a.UNLIKED:t(i.Z,n);break;case N.a.DISLIKED:t(i.jb,n);break;case N.a.UNDISLIKED:t(i.Y,n);break;case N.a.FLAGGED:case N.a.PICKED:case N.a.UNPICKED:case N.a.PINNED:case N.a.UNPINNED:case N.a.DELETED:case N.a.SPAM:case N.a.DISABLED:case N.a.VISIBLE:t(i.Lc,{key:n,item:s});break;case N.a.FLAGS_CLEARED:t(i.Lc,{key:n,item:s}),t(i.I,n)}}},[E.Sc]({commit:t},e){const{post:n,media:s}=Object(a.d)(e);return s.forEach(e=>{t(i.Dc,e)}),t(i.oc,{key:n.content_uuid,item:n}),Promise.resolve(n)},[E.Rc]({getters:t,dispatch:e},{content_container_uuid:n,contents:i,shouldSetUsersSynchronously:s=!1}){const c=[],o={};for(let s=0;s<i.length;s++){const r=i[s];r.media=r.media||[],r.content_container_uuid=r.content_container_uuid||n;const{actor_uuid:u,metadata:_}=r;if(c.push(e(E.Sc,r).then(()=>r.content_uuid)),r.origin===a.b.USER){const e=t[d.Hc](n)&&_.author_host_section_uuid?_.author_host_section_uuid:"";if(!o[e]){let t;if(_&&_.origin_url){t=new URL(_.origin_url).hostname}o[e]={usersUuid:[],domain:t,section:e}}o[e].usersUuid.includes(u)||o[e].usersUuid.push(u)}}for(const t of Object.values(o))t.usersUuid.length&&(s?c.push(e(E.Fb,t)):e(E.Fb,t));return Promise.all(c)},[E.rc]({commit:t}){t(i.ec)}},h=n(387),D=n(390);const I=()=>({mutations:u,getters:p,actions:O,state:a.e,modules:{replyThreads:Object(h.replyThreads)(),reportComment:Object(D.reportComment)()}})},543:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return l})),n.d(e,"i",(function(){return b})),n.d(e,"f",(function(){return f}));var i=n(2),s=n(0),c=n(51);const o=t=>(e,n)=>e[t](n),a=t=>(e,n)=>!e[t](n),r=(t,e)=>(n,i,s)=>{t(n,s)&&e.forEach(t=>i(t,s))},u=(t,e,n)=>s=>s.hasOwnProperty("error_status")?(t(i.oc,{key:e,item:n}),Promise.reject(s.error_status)):Promise.resolve(),d=(t,e)=>{const n=t[s.X](e);return{section_uuid:t[s.Ec](n),content_container_uuid:n,content_uuid:e}},_=(t,e)=>({commit:n,getters:i},c)=>{const o=Object.assign({},i[s.T](c)),a=d(i,c);return e.forEach(t=>t(i,n,c)),t(a).then(u(n,c,o))},l=t=>({commit:e,getters:n},{content_uuid:o,content:a,media_uuids:r,props:_={}})=>{const l=Object.assign({},n[s.T](o)),b=n[s.X](o),{is_content_premoderation_enabled:f}=n[s.W](b),p=n[s.V](b),E=n[s.nc](null==p?void 0:p.locationId),m={...d(n,o),content:{content:a,media_uuids:r,metadata:E},..._},N={is_edited:!0,content:a,..._};return f&&(N.state_reasons=[c.d.CONTENT_AWAITING_MODERATION]),e(i.oc,{key:o,item:N}),t(m).then(u(e,o,l))},b=(t,e)=>{try{const n=JSON.parse(window.localStorage.getItem("_vf-content-reported"))||{};n[e]=n[e]||{},n[e][t]=!0,window.localStorage.setItem("_vf-content-reported",JSON.stringify(n))}catch(t){console.error("VIAFOURA: Failed to store reported content")}},f=(t,e)=>{try{return(JSON.parse(window.localStorage.getItem("_vf-content-reported"))||{})[e][t]}catch(t){return null}}},763:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));const i=t=>(e,n)=>{e[n][t]++},s=t=>(e,n)=>{e[n][t]--}}}]);
//# sourceMappingURL=content-module-js.92259ec1e33b5ae11e68.js.map